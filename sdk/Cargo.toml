[package]
name = "gadget-sdk"
version = "0.1.0"
authors.workspace = true
edition.workspace = true
homepage.workspace = true
repository.workspace = true
description = "SDK for building Blueprints and gadget on Tangle Network"
license.workspace = true


[dependencies]
cfg-if = { workspace = true }
elliptic-curve = { workspace = true, features = ["alloc", "sec1"] }
getrandom = { workspace = true }
hex = { workspace = true, features = ["alloc"] }
lock_api = { workspace = true }
parking_lot = { workspace = true }
rand = { version = "0.8", default-features = false, features = ["alloc"] }
thiserror = { workspace = true }

# Shell deps
multiaddr = { workspace = true, default-features = false }
structopt = { workspace = true, optional = true }
url = { workspace = true, default-features = false, features = ["alloc", "serde"] }

# Keystore deps
ed25519-zebra = { workspace = true }
k256 = { workspace = true, features = ["ecdsa", "ecdsa-core", "arithmetic"] }
parity-scale-codec = { workspace = true, optional = true }
sc-keystore = { workspace = true, optional = true }
scale-info = { workspace = true, optional = true }
schnorrkel = { workspace = true }
sp-keystore = { workspace = true, optional = true }
w3f-bls = { workspace = true }

# Metrics deps
hyper = { workspace = true, features = ["http1", "server"] }
prometheus = { workspace = true }
tokio = { workspace = true, features = ["rt-multi-thread", "parking_lot"] }

# Logging deps
log = { workspace = true }
tracing = { workspace = true }

# Networking deps
async-trait = { workspace = true }
bincode = { workspace = true }
futures = { workspace = true }
gadget-core = { workspace = true, features = ["substrate"] }
gadget-common = { workspace = true, features = ["default"] }
serde = { workspace = true }
serde_json = { workspace = true }

# Substrate
sp-application-crypto = { workspace = true, default-features = false, features = ["full_crypto"] }
sp-core = { workspace = true, features = ["full_crypto"] }
sp-io = { workspace = true }

# Event Watchers and Handlers
backoff = { workspace = true }
subxt = { workspace = true }
tangle-subxt = { workspace = true }

# EVM Event Watchers and Handlers
alloy-contract = { workspace = true }
alloy-network = { workspace = true }
alloy-primitives = { workspace = true }
alloy-provider = { workspace = true }
alloy-pubsub = { workspace = true }
alloy-rpc-types = { workspace = true }
alloy-signer = { workspace = true }
alloy-sol-types = { workspace = true }
alloy-transport = { workspace = true }

# Macros
gadget-blueprint-proc-macro = { workspace = true }
derive_more = { workspace = true }

# Benchmarking deps
sysinfo = { workspace = true }

# WASM
js-sys = { workspace = true, optional = true }
serde-wasm-bindgen = { workspace = true, optional = true }
tsify = { workspace = true, optional = true }
wasm-bindgen = { workspace = true, optional = true }
wasm-bindgen-futures = { workspace = true, optional = true }
wasmtimer = { workspace = true, optional = true }

[target.'cfg(not(target_family = "wasm"))'.dependencies.libp2p]
workspace = true
features = [
    "tokio",
    "gossipsub",
    "mdns",
    "noise",
    "macros",
    "yamux",
    "tcp",
    "quic",
    "request-response",
    "cbor",
    "identify",
    "kad",
    "dcutr",
    "relay",
    "ping",
    "dns",
    "autonat"
]

[target.'cfg(not(target_family = "wasm"))'.dev-dependencies]
hyper = { workspace = true, features = ["client"] }

# [dev-dependencies]
# tangle-test-utils = { workspace = true }

[features]
default = ["std"]

std = [
    "dep:parity-scale-codec",
    "dep:scale-info",
    "dep:sp-keystore",
    "dep:sc-keystore",
    "dep:structopt",
    "getrandom",
    "hex/std",
    "rand/std",
    "rand/std_rng",
    "sp-io/std",
]
wasm = [
    "dep:js-sys",
    "dep:serde-wasm-bindgen",
    "dep:wasm-bindgen",
    "dep:wasm-bindgen-futures",
    "dep:wasmtimer",
    "getrandom/js",
]
typescript = ["dep:tsify", "wasm"]

# Randomness
getrandom = ["rand/getrandom"]
